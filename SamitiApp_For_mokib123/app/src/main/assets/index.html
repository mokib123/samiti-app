<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡¶æ‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡¶ø‡¶ï ‡¶∏‡¶Æ‡¶ø‡¶§‡¶ø</title>
  <style>
    :root {
      --scale: 1;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f0f4f8;
      padding: 20px;
      transform: scale(var(--scale));
      transform-origin: top center;
    }
    .container {
      max-width: 800px;
      margin: auto;
    }
    h1, h2 {
      text-align: center;
      color: #2c3e50;
    }
    .section {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    input, select, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 1em;
    }
    button {
      background-color: #3498db;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #2980b9;
    }
    ul {
      list-style-type: none;
      padding: 0;
    }
    li {
      background: #f9f9f9;
      padding: 10px;
      margin: 5px 0;
      display: flex;
      justify-content: space-between;
      border-radius: 5px;
    }
    .action-btns button {
      margin-left: 5px;
      font-size: 0.9em;
    }
    .top-right {
      text-align: right;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="authSection">
      <div class="section">
        <h2>‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™</h2>
        <input type="text" id="signupUser" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ">
        <input type="password" id="signupPass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
        <button onclick="signup()">Sign Up</button>
      </div>
      <div class="section">
        <h2>‡¶≤‡¶ó‡¶á‡¶®</h2>
        <input type="text" id="loginUser" placeholder="‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ">
        <input type="password" id="loginPass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°">
        <button onclick="login()">Login</button>
      </div>
    </div>

    <div id="mainApp" class="hidden">
      <div class="top-right">
        <button onclick="logout()">üîí ‡¶≤‡¶ó ‡¶Ü‡¶â‡¶ü</button>
      </div>
      <h1>‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶™‡¶æ‡¶∞‡¶ø‡¶¨‡¶æ‡¶∞‡¶ø‡¶ï ‡¶∏‡¶Æ‡¶ø‡¶§‡¶ø</h1>

      <div class="section">
        <h2>‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
        <input type="text" id="memberName" placeholder="‡¶®‡¶æ‡¶Æ">
        <input type="text" id="memberPhone" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞">
        <input type="text" id="memberAddress" placeholder="‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ">
        <button onclick="addMember()">‚úÖ ‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        <ul id="memberList"></ul>
      </div>

      <div class="section">
        <h2>‡¶ö‡¶æ‡¶Å‡¶¶‡¶æ ‡¶ú‡¶Æ‡¶æ</h2>
        <input type="date" id="paymentDate">
        <input type="number" id="paymentAmount" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">
        <select id="paymentMember"></select>
        <button onclick="addPayment()">üì• ‡¶ú‡¶Æ‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
      </div>

      <div class="section">
        <h2>‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</h2>
        <ul id="monthlyReport"></ul>
      </div>

      <div class="section">
        <h2>‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡¶æ‡¶®‡ßç‡¶∏ ‡¶∂‡ßÄ‡¶ü</h2>
        <p>‡¶Æ‡ßã‡¶ü ‡¶ö‡¶æ‡¶Å‡¶¶‡¶æ: <span id="totalIncome">0</span> ‡¶ü‡¶æ‡¶ï‡¶æ</p>
      </div>

      <div class="section">
        <button onclick="resetData()">‚ôªÔ∏è Reset / Restart</button>
      </div>
    </div>
  </div>

  <script>
    let members = JSON.parse(localStorage.getItem("members")) || [];
    let payments = JSON.parse(localStorage.getItem("payments")) || [];
    let creds = JSON.parse(localStorage.getItem("userCreds"));
    let loggedIn = localStorage.getItem("isLoggedIn") === 'true';

    function saveData() {
      localStorage.setItem("members", JSON.stringify(members));
      localStorage.setItem("payments", JSON.stringify(payments));
    }

    function addMember() {
      const name = document.getElementById("memberName").value;
      const phone = document.getElementById("memberPhone").value;
      const address = document.getElementById("memberAddress").value;
      if (name && phone && address) {
        members.push({ name, phone, address });
        saveData();
        updateMemberList();
        updateMemberDropdown();
      }
    }

    function updateMemberList() {
      const list = document.getElementById("memberList");
      list.innerHTML = "";
      members.forEach((m, i) => {
        const li = document.createElement("li");
        li.innerHTML = `<span><strong>${m.name}</strong> (${m.phone}) - ${m.address}</span>
          <span class='action-btns'>
            <button onclick='editMember(${i})'>‚úèÔ∏è</button>
            <button onclick='deleteMember(${i})'>üóëÔ∏è</button>
          </span>`;
        list.appendChild(li);
      });
    }

    function editMember(i) {
      const m = members[i];
      const name = prompt("‡¶®‡¶§‡ßÅ‡¶® ‡¶®‡¶æ‡¶Æ:", m.name);
      const phone = prompt("‡¶®‡¶§‡ßÅ‡¶® ‡¶´‡ßã‡¶®:", m.phone);
      const address = prompt("‡¶®‡¶§‡ßÅ‡¶® ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:", m.address);
      if (name && phone && address) {
        members[i] = { name, phone, address };
        saveData();
        updateMemberList();
        updateMemberDropdown();
      }
    }

    function deleteMember(i) {
      if (confirm("‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) {
        members.splice(i, 1);
        saveData();
        updateMemberList();
        updateMemberDropdown();
      }
    }

    function updateMemberDropdown() {
      const dropdown = document.getElementById("paymentMember");
      dropdown.innerHTML = "";
      members.forEach(m => {
        const opt = document.createElement("option");
        opt.value = m.name;
        opt.textContent = m.name;
        dropdown.appendChild(opt);
      });
    }

    function addPayment() {
      const date = document.getElementById("paymentDate").value;
      const amount = parseFloat(document.getElementById("paymentAmount").value);
      const member = document.getElementById("paymentMember").value;
      if (date && amount && member) {
        payments.push({ date, amount, member });
        saveData();
        updateMonthlyReport();
        updateTotalIncome();
      }
    }

    function updateMonthlyReport() {
      const report = document.getElementById("monthlyReport");
      report.innerHTML = "";
      payments.forEach((p, i) => {
        const li = document.createElement("li");
        li.innerHTML = `${p.date} - ${p.member} ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡ßá ${p.amount} ‡¶ü‡¶æ‡¶ï‡¶æ <button onclick='editPayment(${i})'>‚úèÔ∏è</button>`;
        report.appendChild(li);
      });
    }

    function editPayment(i) {
      const p = payments[i];
      const date = prompt("‡¶®‡¶§‡ßÅ‡¶® ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ:", p.date);
      const amount = parseFloat(prompt("‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£:", p.amount));
      const member = prompt("‡¶∏‡¶¶‡¶∏‡ßç‡¶Ø ‡¶®‡¶æ‡¶Æ:", p.member);
      if (date && amount && member) {
        payments[i] = { date, amount, member };
        saveData();
        updateMonthlyReport();
        updateTotalIncome();
      }
    }

    function updateTotalIncome() {
      const total = payments.reduce((sum, p) => sum + p.amount, 0);
      document.getElementById("totalIncome").textContent = total;
    }

    function resetData() {
      if (confirm("‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶¨‡ßá‡¶®?")) {
        members = [];
        payments = [];
        saveData();
        updateMemberList();
        updateMemberDropdown();
        updateMonthlyReport();
        updateTotalIncome();
      }
    }

    function signup() {
      const user = document.getElementById("signupUser").value;
      const pass = document.getElementById("signupPass").value;
      if (user && pass) {
        localStorage.setItem("userCreds", JSON.stringify({ user, pass }));
        alert("‡¶∏‡¶æ‡¶á‡¶® ‡¶Ü‡¶™ ‡¶∏‡¶´‡¶≤! ‡¶è‡¶ñ‡¶® ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
      }
    }

    function login() {
      const user = document.getElementById("loginUser").value;
      const pass = document.getElementById("loginPass").value;
      if (creds && user === creds.user && pass === creds.pass) {
        localStorage.setItem("isLoggedIn", 'true');
        document.getElementById("authSection").classList.add("hidden");
        document.getElementById("mainApp").classList.remove("hidden");
      } else {
        alert("‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶®‡ßá‡¶Æ ‡¶¨‡¶æ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶≠‡ßÅ‡¶≤!");
      }
    }

    function logout() {
      localStorage.setItem("isLoggedIn", 'false');
      document.getElementById("authSection").classList.remove("hidden");
      document.getElementById("mainApp").classList.add("hidden");
    }

    // Touch-based pinch zoom
    let lastScale = 1;
    let startDist = 0;
    document.addEventListener("touchstart", e => {
      if (e.touches.length === 2) {
        const dx = e.touches[0].clientX - e.touches[1].clientX;
        const dy = e.touches[0].clientY - e.touches[1].clientY;
        startDist = Math.sqrt(dx*dx + dy*dy);
      }
    });
    document.addEventListener("touchmove", e => {
      if (e.touches.length === 2) {
        e.preventDefault();
        const dx = e.touches[0].clientX - e.touches[1].clientX;
        const dy = e.touches[0].clientY - e.touches[1].clientY;
        const newDist = Math.sqrt(dx*dx + dy*dy);
        let scale = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--scale')) || 1;
        const newScale = scale * (newDist / startDist);
        document.documentElement.style.setProperty('--scale', Math.min(Math.max(newScale, 0.5), 2).toFixed(2));
        startDist = newDist;
      }
    }, { passive: false });

    if (loggedIn && creds) {
      document.getElementById("authSection").classList.add("hidden");
      document.getElementById("mainApp").classList.remove("hidden");
    }

    updateMemberList();
    updateMemberDropdown();
    updateMonthlyReport();
    updateTotalIncome();
  </script>
</body>
</html>
